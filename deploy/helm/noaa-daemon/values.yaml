# NOAA Daemon Helm Chart Values
# Weather data fetching daemon (runs continuously)

image:
  repository: ghcr.io/tee8z/noaa-daemon
  tag: ""  # Defaults to appVersion
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""
  automount: true

# Sleep interval between data fetches (in seconds)
# Default: 3600 (1 hour)
sleepInterval: 3600

resources:
  requests:
    memory: 64Mi
    cpu: 25m
  limits:
    memory: 128Mi

podSecurityContext: {}
securityContext: {}

# Application configuration
config:
  # Logging level
  level: "info"
  # Oracle server URL to upload data to
  baseUrl: "http://noaa-oracle.oracle.svc.cluster.local:9800"
  # Temporary data directory
  dataDir: /tmp/noaa-daemon
  # HTTP client settings
  userAgent: "noaa-oracle-daemon/1.0"
  refillRate: 15.0
  tokenCapacity: 3

# S3 storage for parquet archival (requires 's3' feature in binary)
s3:
  enabled: false
  bucket: ""
  region: ""
  # Endpoint URL (for moto/localstack, leave empty for AWS)
  endpoint: ""
  # AWS credentials (for local dev with moto)
  accessKeyId: ""
  secretAccessKey: ""

# Environment variables
env: {}
envFrom: []

nodeSelector: {}
tolerations: []
affinity: {}

podAnnotations: {}
podLabels: {}

# Dev mode configuration for fast local development
devMode:
  enabled: false
  hostPath: /mnt/noaa-oracle/daemon
  baseImage: debian:bookworm-slim
