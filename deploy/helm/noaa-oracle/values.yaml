# NOAA Oracle Helm Chart Values
# Weather data oracle API for DLC-based prediction markets

replicaCount: 1

image:
  repository: ghcr.io/tee8z/noaa-oracle
  tag: ""  # Defaults to appVersion
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""
  automount: true

service:
  type: ClusterIP
  port: 9800

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts: []
  tls: []

resources:
  requests:
    memory: 128Mi
    cpu: 50m
  limits:
    memory: 256Mi

podSecurityContext: {}
securityContext: {}

# Health check configuration
healthCheck:
  path: /health
  port: 9800

livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 10
  periodSeconds: 30
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

# Persistence for weather data and event database
persistence:
  enabled: true
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 10Gi
  mountPath: /var/lib/noaa-oracle

# Litestream S3 backup for event database
litestream:
  enabled: true
  image:
    repository: litestream/litestream
    tag: "0.3.13"
  s3Bucket: ""
  s3Path: "oracle.db"
  s3Region: "us-east-1"
  s3Endpoint: ""
  s3ForcePathStyle: false
  syncInterval: "10s"
  retention: "168h"
  snapshotInterval: "1h"

# Application configuration
config:
  # Logging level: trace, debug, info, warn, error
  level: "info"
  # Server binding
  host: "0.0.0.0"
  port: 9800
  # Public URL for API responses
  remoteUrl: ""
  # Weather data directory
  dataDir: /var/lib/noaa-oracle/weather
  # Event database directory (DuckDB)
  eventDb: /var/lib/noaa-oracle/events
  # UI static files
  uiDir: /usr/share/noaa-oracle/ui
  # Private key path for signing
  privateKeyPath: /var/lib/noaa-oracle/keys/oracle.pem

# Environment variables
env: {}
envFrom: []

nodeSelector: {}
tolerations: []
affinity: {}

podAnnotations: {}
podLabels: {}

metrics:
  enabled: false
  path: /metrics
  interval: 30s
